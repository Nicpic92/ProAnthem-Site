<!-- START OF FILE public/dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ProAnthem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <style>
        body {
            background-color: #111827;
            color: #f3f4f6;
        }
        .feature-card {
            background-color: #1f2937;
            border: 1px solid #374151;
            transition: all 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            border-color: #4f46e5;
        }
    </style>
</head>
<body class="tool flex flex-col min-h-screen">

    <header class="container mx-auto p-6 flex justify-between items-center">
        <a href="/dashboard.html" class="flex items-center space-x-4">
            <img src="/assets/logo_pa.jpg" alt="ProAnthem Logo" class="h-12">
            <h1 class="text-4xl font-bold">ProAnthem</h1>
        </a>
        <div id="nav-auth-section">
            <!-- Populated by auth.js -->
        </div>
    </header>

    <main class="flex-grow">
        <section class="container mx-auto px-6 py-12">

            <div id="upgrade-prompt" class="hidden p-4 mb-8 bg-indigo-900/50 border border-indigo-700 text-indigo-200 rounded-lg text-center">
                <p>
                    <strong>You are on the Free Plan.</strong> 
                    Unlock unlimited songs, the Show Builder, and all band tools by upgrading.
                    <a href="/pricing.html" class="font-bold underline hover:text-white">View Plans & Upgrade</a>
                </p>
            </div>

            <div class="mb-12">
                <h1 id="welcome-header" class="text-4xl md:text-5xl font-bold tracking-tight">Welcome!</h1>
                <p class="mt-2 text-lg text-gray-400">Select a tool to get started.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                <div class="feature-card rounded-lg p-8 lg:col-span-2">
                    <h2 class="text-2xl font-bold">ProAnthem Tool</h2>
                    <div class="my-3">
                        <span class="bg-green-200 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">Core Tool</span>
                    </div>
                    <p class="text-gray-400 mb-6 flex-grow">
                        The complete hub for songwriting and performance. Build songs with lyrics, chords, and tabs, then organize them into powerful setlists for your live shows. Includes practice tools like the stem mixer and chord visualizer.
                    </p>
                    <a href="/ProjectAnthem.html" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg text-center transition-colors">
                        Launch Tool
                    </a>
                </div>

                <div id="band-management-card" class="feature-card rounded-lg p-8 band-only hidden">
                    <h2 class="text-2xl font-bold">Band Management</h2>
                    <div class="my-3">
                        <span class="bg-indigo-200 text-indigo-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">Band Feature</span>
                    </div>
                    <p class="text-gray-400 mb-6 flex-grow">
                        Manage your band's members, public profile, calendar, finances, and merchandise inventory.
                    </p>
                    <a href="/band.html" class="w-full bg-slate-700 hover:bg-slate-800 text-white font-bold py-3 px-4 rounded-lg text-center transition-colors">
                        Manage Band
                    </a>
                </div>
                
                <div id="stage-plot-card" class="feature-card rounded-lg p-8 stage-plot-only hidden">
                    <h2 class="text-2xl font-bold">Stage Plot & Tech Rider</h2>
                    <div class="my-3">
                        <span class="bg-indigo-200 text-indigo-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">Band Feature</span>
                    </div>
                    <p class="text-gray-400 mb-6 flex-grow">
                        Create professional stage plots with a visual drag-and-drop editor and generate tech riders for venues.
                    </p>
                    <a href="/stage-plot-editor.html" class="w-full bg-slate-700 hover:bg-slate-800 text-white font-bold py-3 px-4 rounded-lg text-center transition-colors">
                        Open Editor
                    </a>
                </div>

            </div>
        </section>
    </main>

    <footer class="text-center py-6 text-gray-500">
        <p>&copy; 2025 ProAnthem. A Spreadsheet Simplicity Product.</p>
    </footer>

    <script type="module">
        import { getUserPayload, checkAccess } from './js/auth.js';

        document.addEventListener('DOMContentLoaded', () => {
            if (!checkAccess()) {
                return;
            }

            const user = getUserPayload();
            if (!user) {
                window.location.href = '/proanthem_index.html';
                return;
            }

            const welcomeHeader = document.getElementById('welcome-header');
            welcomeHeader.textContent = `Welcome, ${user.name}!`;
            
            if (user.permissions && user.permissions.role === 'free') {
                const upgradePrompt = document.getElementById('upgrade-prompt');
                if (upgradePrompt) {
                    upgradePrompt.classList.remove('hidden');
                }
            }

            // Show Band Management card based on its specific permission
            if (user.permissions && user.permissions.can_manage_band) {
                document.getElementById('band-management-card').classList.remove('hidden');
            }
            
            // Show Stage Plot card based on ITS specific permission
            if (user.permissions && user.permissions.can_use_stage_plots) {
                document.getElementById('stage-plot-card').classList.remove('hidden');
            }
        });
    </script>
    <script type="module" src="/js/auth.js"></script>
</body>
</html>
