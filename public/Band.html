<!-- START OF FILE public/band.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Band Management - ProAnthem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="tool flex flex-col min-h-screen">

    <header class="container mx-auto p-6 flex justify-between items-center">
        <a href="/dashboard.html" class="flex items-center space-x-4">
            <img src="/assets/logo_pa.jpg" alt="ProAnthem Logo" class="h-12">
            <h1 class="text-4xl font-bold">ProAnthem</h1>
        </a>
        <div id="nav-auth-section"></div>
    </header>

    <main class="container mx-auto px-6 py-12 flex-grow">
        <div id="band-content" style="display: none;">
            <div class="flex flex-col md:flex-row justify-between md:items-center gap-4">
                 <div>
                    <h1 id="band-name-header" class="text-4xl font-bold">Your Band</h1>
                    <p id="band-id-display" class="text-lg text-gray-400 mt-2">Loading...</p>
                 </div>
                 <a href="/dashboard.html" class="btn btn-secondary w-full md:w-auto">‚Üê Back to Dashboard</a>
            </div>

            <!-- TAB NAVIGATION -->
            <div class="mt-8 border-b border-gray-700">
                <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                    <button class="tab-button active" data-tab="members">Members</button>
                    <button class="tab-button" data-tab="profile">Public Profile</button>
                    <button class="tab-button" data-tab="calendar">Calendar</button>
                    <button class="tab-button" data-tab="finances">Finances</button>
                    <button class="tab-button" data-tab="merch">Merchandise</button>
                </nav>
            </div>

            <!-- TAB CONTENT -->

            <!-- Members Tab -->
            <div id="tab-content-members" class="tab-content mt-8">
                <div id="add-member-section" class="bg-gray-900 p-6 rounded-lg shadow-md admin-only" style="display: none;">
                    <h2 class="text-2xl font-bold mb-4">Add New Band Member</h2>
                    <form id="add-member-form" class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                        <input type="text" id="new-member-firstname" required class="form-input" placeholder="First Name">
                        <input type="text" id="new-member-lastname" required class="form-input" placeholder="Last Name">
                        <input type="email" id="new-member-email" required class="form-input" placeholder="Email Address">
                        <div class="md:col-span-3 text-right"><button type="submit" class="btn btn-primary">Create Invite Link</button></div>
                    </form>
                    <div id="add-member-status-container" class="mt-3 hidden">
                        <p id="add-member-status" class="text-sm h-5"></p>
                        <div id="invite-link-container" class="mt-2 hidden">
                            <input type="text" id="invite-link-input" readonly class="form-input w-full mt-1 bg-gray-800"><button id="copy-link-btn" class="btn btn-sm btn-secondary mt-2">Copy</button>
                        </div>
                    </div>
                </div>
                <div class="mt-8 bg-gray-900 p-8 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4">Current Members</h2>
                    <div class="overflow-x-auto">
                        <table class="min-w-full"><thead class="bg-gray-800"><tr>
                            <th class="p-3 text-left">Email</th><th class="p-3 text-left">Name</th>
                            <th class="p-3 text-left">Role</th><th class="p-3 text-left admin-only" style="display: none;">Actions</th>
                        </tr></thead><tbody id="members-table-body"></tbody></table>
                    </div>
                </div>
            </div>

            <!-- Profile Tab -->
            <div id="tab-content-profile" class="tab-content mt-8 hidden">
                 <form id="profile-form" class="bg-gray-900 p-8 rounded-lg shadow-md space-y-6">
                    <h2 class="text-2xl font-bold">Edit Public Profile</h2>
                    <!-- Placeholder for profile form fields. JS will populate this. -->
                </form>
            </div>
            
            <!-- Calendar Tab -->
            <div id="tab-content-calendar" class="tab-content mt-8 hidden">
                 <div class="bg-gray-900 p-8 rounded-lg shadow-md">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Band Calendar</h2>
                        <button id="add-event-btn" class="btn btn-primary admin-only" style="display: none;">Add Event</button>
                    </div>
                    <div id="calendar-event-list" class="space-y-4"></div>
                </div>
            </div>

            <!-- Finances Tab -->
            <div id="tab-content-finances" class="tab-content mt-8 hidden">
                <div class="bg-gray-900 p-8 rounded-lg shadow-md">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Financial Ledger</h2>
                        <button id="add-transaction-btn" class="btn btn-primary admin-only" style="display: none;">Add Transaction</button>
                    </div>
                    <p class="text-lg font-bold mb-4">Total Balance: <span id="total-balance" class="text-green-400">$0.00</span></p>
                    <div class="overflow-x-auto"><table class="min-w-full">
                        <thead class="bg-gray-800"><tr>
                            <th class="p-3 text-left">Date</th><th class="p-3 text-left">Description</th>
                            <th class="p-3 text-left">Category</th><th class="p-3 text-right">Amount</th>
                            <th class="p-3 text-right admin-only" style="display: none;">Actions</th>
                        </tr></thead>
                        <tbody id="transactions-table-body"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- Merch Tab -->
            <div id="tab-content-merch" class="tab-content mt-8 hidden">
                 <div class="bg-gray-900 p-8 rounded-lg shadow-md">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Merchandise Inventory</h2>
                        <button id="add-merch-btn" class="btn btn-primary admin-only" style="display: none;">Add Item</button>
                    </div>
                    <div class="overflow-x-auto"><table class="min-w-full">
                        <thead class="bg-gray-800"><tr>
                            <th class="p-3 text-left">Item</th><th class="p-3 text-left">Variant</th>
                            <th class="p-3 text-right">Price</th><th class="p-3 text-right">Stock</th>
                            <th class="p-3 text-right admin-only" style="display: none;">Actions</th>
                        </tr></thead>
                        <tbody id="merch-table-body"></tbody>
                    </table></div>
                </div>
            </div>

        </div>
        <div id="access-denied" class="text-center" style="display: none;"></div>
    </main>

    <!-- MODALS ARE NOW INCLUDED -->
    <div id="event-modal" class="modal-overlay hidden"><div class="modal-content">
        <h2 id="event-modal-title" class="text-2xl font-bold">Add Event</h2>
        <form id="event-form" class="space-y-4 mt-4">
            <input type="hidden" id="event-id" name="id">
            <input type="text" name="title" required class="form-input" placeholder="Event Title">
            <input type="datetime-local" name="event_date" required class="form-input">
            <input type="text" name="venue_name" class="form-input" placeholder="Venue Name">
            <textarea name="details" rows="3" class="form-input" placeholder="Private Notes"></textarea>
            <div class="pt-4 border-t border-gray-700">
                <div class="flex items-center">
                    <input type="checkbox" id="event-public" name="is_public" class="h-4 w-4 rounded">
                    <label for="event-public" class="ml-3 text-sm">Make this event public</label>
                </div>
                <div id="public-event-fields" class="mt-4 space-y-4 hidden">
                     <input type="url" name="external_url" class="form-input" placeholder="Public Info/Ticket URL">
                </div>
            </div>
            <div class="flex justify-between items-center pt-4"><button type="button" id="delete-event-btn" class="btn btn-danger hidden">Delete</button><div class="flex gap-4"><button type="button" id="cancel-event-btn" class="btn btn-secondary">Cancel</button><button type="submit" class="btn btn-primary">Save Event</button></div></div>
        </form>
    </div></div>

    <div id="transaction-modal" class="modal-overlay hidden"><div class="modal-content">
        <h2 id="transaction-modal-title" class="text-2xl font-bold">Add Transaction</h2>
        <form id="transaction-form" class="space-y-4 mt-4">
            <input type="hidden" id="transaction-id">
            <input type="date" id="transaction-date" required class="form-input">
            <input type="text" id="transaction-description" required class="form-input" placeholder="Description">
            <div class="grid grid-cols-2 gap-4">
                <input type="number" step="0.01" id="transaction-amount" required class="form-input" placeholder="Amount">
                <select id="transaction-category" required class="form-select">
                    <option value="Venue Payout">Venue Payout</option><option value="Merch Sale">Merch Sale</option>
                    <option value="Other Income">Other Income</option><option value="Fuel">Fuel</option>
                    <option value="Food">Food</option><option value="Equipment">Equipment</option>
                    <option value="Other Expense">Other Expense</option>
                </select>
            </div>
            <div class="flex justify-end gap-4 pt-4"><button type="button" class="btn btn-secondary" onclick="closeModal('transaction-modal')">Cancel</button><button type="submit" class="btn btn-primary">Save</button></div>
        </form>
    </div></div>
    
    <div id="merch-modal" class="modal-overlay hidden"><div class="modal-content">
        <h2 id="merch-modal-title" class="text-2xl font-bold">Add Merch Item</h2>
        <form id="merch-form" class="space-y-4 mt-4">
            <input type="hidden" id="merch-id">
            <input type="text" id="merch-item-name" required class="form-input" placeholder="Item Name (e.g., Logo T-Shirt)">
            <input type="text" id="merch-variant-name" class="form-input" placeholder="Variant (e.g., Small, Black)">
            <div class="grid grid-cols-2 gap-4">
                <input type="number" step="0.01" id="merch-price" class="form-input" placeholder="Price (e.g., 20.00)">
                <input type="number" id="merch-stock" required class="form-input" placeholder="Stock Quantity">
            </div>
            <div class="flex justify-end gap-4 pt-4"><button type="button" class="btn btn-secondary" onclick="closeModal('merch-modal')">Cancel</button><button type="submit" class="btn btn-primary">Save</button></div>
        </form>
    </div></div>
    
    <footer class="text-center py-6 text-gray-500">
        <p>&copy; 2025 ProAnthem. A Spreadsheet Simplicity Product.</p>
    </footer>
    
    <script type="module" src="/js/auth.js"></script>
    <script type="module" src="/js/band.js"></script>
    <script>function closeModal(id) { document.getElementById(id).classList.add('hidden'); }</script>
</body>
</html>
<!-- END OF FILE public/band.html -->
